<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roue de la Fortune HappyLemon</title>
    <style>
        body {
            font-family: Candara, Arial, sans-serif;
            text-align: center;
            background-color: #fefae0;
            margin: 0;
            padding: 0;
        }
        h1 {
            font-size: 24px;
            color: #8B4513; /* Marron */
            margin-top: 20px;
        }
        .wheel-container {
            position: relative;
            margin: 50px auto;
            width: 300px;
            height: 300px;
        }
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid #ffcc00;
            background: conic-gradient(
                #ffcc00 0% 25%, 
                #ccc 25% 50%, 
                #ffcc00 50% 75%, 
                #ccc 75% 100%
            );
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            transform: rotate(0deg);
            transition: transform 3s ease-out;
        }
        .wheel span {
            position: absolute;
            font-size: 18px;
            font-weight: bold;
            color: #000;
            transform-origin: 50% 50%;
        }
        .wheel .cadeau {
            transform: rotate(45deg) translate(110px);
        }
        .wheel .perdu {
            transform: rotate(135deg) translate(110px);
        }
        .wheel .cadeau:nth-child(3) {
            transform: rotate(225deg) translate(110px);
        }
        .wheel .perdu:nth-child(4) {
            transform: rotate(315deg) translate(110px);
        }
        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 20px solid red;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: green;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: darkgreen;
        }
        .result-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 400px;
            background-color: white;
            border: 2px solid green;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            display: none;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .result-modal img {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }
        .newsletter {
            margin-top: 20px;
            display: none;
        }
        .newsletter input[type="email"] {
            padding: 10px;
            width: 70%;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .newsletter button {
            padding: 10px 20px;
            background-color: green;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .newsletter button:hover {
            background-color: darkgreen;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Roue de la Fortune HappyLemon</h1>
    <div class="wheel-container">
        <div class="pointer"></div>
        <div id="wheel" class="wheel">
            <span class="cadeau">CADEAU</span>
            <span class="perdu">PERDU</span>
            <span class="cadeau" style="transform: rotate(225deg) translate(110px);">CADEAU</span>
            <span class="perdu" style="transform: rotate(315deg) translate(110px);">PERDU</span>
        </div>
    </div>
    <button id="spinButton">Lancer la Roue</button>
    <div class="overlay" id="overlay"></div>
    <div class="result-modal" id="resultModal">
        <img id="resultImage" src="" alt="RÃ©sultat">
        <p id="resultMessage" style="margin-top: 10px; font-size: 18px;"></p>
    </div>
    <div class="newsletter" id="newsletter">
        <h2>Inscrivez-vous Ã  notre newsletter</h2>
        <form action="https://formspree.io/f/xjkvolea" method="POST">
            <input type="email" name="email" placeholder="Votre email" required>
            <button type="submit">S'inscrire</button>
        </form>
    </div>

    <script>
        const wheel = document.getElementById('wheel');
        const resultMessage = document.getElementById('resultMessage');
        const spinButton = document.getElementById('spinButton');
        const resultImage = document.getElementById('resultImage');
        const resultModal = document.getElementById('resultModal');
        const overlay = document.getElementById('overlay');
        const newsletter = document.getElementById('newsletter');
        let isSpinning = false;

        const gagneImage = "https://i.imgur.com/kRhG7ix.jpeg";
        const perduImage = "https://i.imgur.com/NyJhyhw.jpeg";

        spinButton.addEventListener('click', () => {
            if (isSpinning) return; // EmpÃªche de relancer pendant que la roue tourne
            isSpinning = true;

            const rotation = Math.floor(Math.random() * 360) + 360 * 3; // Rotation alÃ©atoire + tours complets
            wheel.style.transform = `rotate(${rotation}deg)`;

            // DÃ©termine le rÃ©sultat aprÃ¨s 3 secondes (durÃ©e de l'animation)
            setTimeout(() => {
                const finalDegree = rotation % 360;
                const isWinner = Math.random() < 0.15; // ProbabilitÃ© de gagner : 15%
                const result = isWinner
                    ? { message: "ðŸŽ‰ FÃ©licitations, vous avez gagnÃ© un topping gratuit ou une rÃ©ductionâ€¯!", image: gagneImage }
                    : { message: "ðŸ˜” C'est perdu, retentez votre chanceâ€¯!", image: perduImage };

                // Afficher l'image et le message dans la modale
                resultMessage.textContent = result.message;
                resultImage.src = result.image;
                overlay.style.display = "block";
                resultModal.style.display = "block";
                newsletter.style.display = "block";
                isSpinning = false;
            }, 3000);
        });

        // Fermer la modale si on clique sur l'overlay
        overlay.addEventListener('click', () => {
            overlay.style.display = "none";
            resultModal.style.display = "none";
        });
    </script>
</body>
</html>
